window.H5Player=function(e){var t=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function(e,i){!function(e,t){if(!L[e]||!E[e])return;for(var i in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(v[i]=t[i]);0==--m&&0===y&&x()}(e,i),t&&t(e,i)};var i,n=!0,o="3dde06c5b2c19447bbe4",s=1e4,r={},a=[],l=[];function c(e){var t=q[e];if(!t)return O;var n=function(n){return t.hot.active?(q[n]?-1===q[n].parents.indexOf(e)&&q[n].parents.push(e):(a=[e],i=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),a=[]),O(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return O[e]},set:function(t){O[e]=t}}};for(var s in O)Object.prototype.hasOwnProperty.call(O,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(n,s,o(s));return n.e=function(e){return"ready"===p&&h("prepare"),y++,O.e(e).then(t,(function(e){throw t(),e}));function t(){y--,"prepare"===p&&(b[e]||w(e),0===y&&0===m&&x())}},n.t=function(e,t){return 1&t&&(e=n(e)),O.t(e,-2&t)},n}function u(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:S,apply:D,status:function(e){if(!e)return p;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:r[e]};return i=void 0,t}var d=[],p="idle";function h(e){p=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}var _,v,f,m=0,y=0,b={},E={},L={};function g(e){return+e+""===e?+e:e}function S(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return n=e,h("check"),(t=s,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var n=new XMLHttpRequest,s=O.p+""+o+".hot-update.json";n.open("GET",s,!0),n.timeout=t,n.send(null)}catch(e){return i(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)i(new Error("Manifest request to "+s+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)i(new Error("Manifest request to "+s+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return h("idle"),null;E={},b={},L=e.c,f=e.h,h("prepare");var t=new Promise((function(e,t){_={resolve:e,reject:t}}));v={};return w(0),"prepare"===p&&0===y&&0===m&&x(),t}));var t}function w(e){L[e]?(E[e]=!0,m++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=O.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function x(){h("ready");var e=_;if(_=null,e)if(n)Promise.resolve().then((function(){return D(n)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in v)Object.prototype.hasOwnProperty.call(v,i)&&t.push(g(i));e.resolve(t)}}function D(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var i,n,s,l,c;function u(e){for(var t=[e],i={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var o=n.pop(),s=o.id,r=o.chain;if((l=q[s])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:r,moduleId:s};if(l.hot._main)return{type:"unaccepted",chain:r,moduleId:s};for(var a=0;a<l.parents.length;a++){var c=l.parents[a],u=q[c];if(u){if(u.hot._declinedDependencies[s])return{type:"declined",chain:r.concat([c]),moduleId:s,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[s]?(i[c]||(i[c]=[]),d(i[c],[s])):(delete i[c],t.push(c),n.push({chain:r.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var _={},m=[],y={},b=function(){console.warn("[HMR] unexpected require("+S.moduleId+") to disposed module")};for(var E in v)if(Object.prototype.hasOwnProperty.call(v,E)){var S;c=g(E);var w=!1,x=!1,D=!1,k="";switch((S=v[E]?u(c):{type:"disposed",moduleId:E}).chain&&(k="\nUpdate propagation: "+S.chain.join(" -> ")),S.type){case"self-declined":t.onDeclined&&t.onDeclined(S),t.ignoreDeclined||(w=new Error("Aborted because of self decline: "+S.moduleId+k));break;case"declined":t.onDeclined&&t.onDeclined(S),t.ignoreDeclined||(w=new Error("Aborted because of declined dependency: "+S.moduleId+" in "+S.parentId+k));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(S),t.ignoreUnaccepted||(w=new Error("Aborted because "+c+" is not accepted"+k));break;case"accepted":t.onAccepted&&t.onAccepted(S),x=!0;break;case"disposed":t.onDisposed&&t.onDisposed(S),D=!0;break;default:throw new Error("Unexception type "+S.type)}if(w)return h("abort"),Promise.reject(w);if(x)for(c in y[c]=v[c],d(m,S.outdatedModules),S.outdatedDependencies)Object.prototype.hasOwnProperty.call(S.outdatedDependencies,c)&&(_[c]||(_[c]=[]),d(_[c],S.outdatedDependencies[c]));D&&(d(m,[S.moduleId]),y[c]=b)}var I,V=[];for(n=0;n<m.length;n++)c=m[n],q[c]&&q[c].hot._selfAccepted&&y[c]!==b&&V.push({module:c,errorHandler:q[c].hot._selfAccepted});h("dispose"),Object.keys(L).forEach((function(e){!1===L[e]&&function(e){delete installedChunks[e]}(e)}));for(var A,P,B=m.slice();B.length>0;)if(c=B.pop(),l=q[c]){var T={},M=l.hot._disposeHandlers;for(s=0;s<M.length;s++)(i=M[s])(T);for(r[c]=T,l.hot.active=!1,delete q[c],delete _[c],s=0;s<l.children.length;s++){var j=q[l.children[s]];j&&((I=j.parents.indexOf(c))>=0&&j.parents.splice(I,1))}}for(c in _)if(Object.prototype.hasOwnProperty.call(_,c)&&(l=q[c]))for(P=_[c],s=0;s<P.length;s++)A=P[s],(I=l.children.indexOf(A))>=0&&l.children.splice(I,1);for(c in h("apply"),o=f,y)Object.prototype.hasOwnProperty.call(y,c)&&(e[c]=y[c]);var C=null;for(c in _)if(Object.prototype.hasOwnProperty.call(_,c)&&(l=q[c])){P=_[c];var F=[];for(n=0;n<P.length;n++)if(A=P[n],i=l.hot._acceptedDependencies[A]){if(-1!==F.indexOf(i))continue;F.push(i)}for(n=0;n<F.length;n++){i=F[n];try{i(P)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:c,dependencyId:P[n],error:e}),t.ignoreErrored||C||(C=e)}}}for(n=0;n<V.length;n++){var U=V[n];c=U.module,a=[c];try{O(c)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(i){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:i,originalError:e}),t.ignoreErrored||C||(C=i),C||(C=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:c,error:e}),t.ignoreErrored||C||(C=e)}}return C?(h("fail"),Promise.reject(C)):(h("idle"),new Promise((function(e){e(m)})))}var q={};function O(t){if(q[t])return q[t].exports;var i=q[t]={i:t,l:!1,exports:{},hot:u(t),parents:(l=a,a=[],l),children:[]};return e[t].call(i.exports,i,i.exports,c(t)),i.l=!0,i.exports}return O.m=e,O.c=q,O.d=function(e,t,i){O.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},O.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},O.t=function(e,t){if(1&t&&(e=O(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(O.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)O.d(i,n,function(t){return e[t]}.bind(null,n));return i},O.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return O.d(t,"a",t),t},O.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},O.p="/",O.h=function(){return o},c(0)(O.s=0)}({"./lib/dom.js":function(e,t){var i=Object.prototype.toString;e.exports={appendTo:function(e,t){var n=document.createDocumentFragment();if("[object NodeList]"===i.call(e))for(var o=0;o<e.length;o++)n.appendChild(e[o]);else n.appendChild(e);return t.appendChild(n),t},addEvent:function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else{var n="on"+t;if(e.attachEvent)e.attachEvent(n,i);else{var o=e[n];e[n]=function(e){e=e||window.event,i.call(null,e),o&&o.call(null,e)}}}},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},offset:function(e){for(var t=0,i=0;e;)i=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{left:t,top:i}},formatTime:function(e){var t;return void 0===e&&(e=0),t=("0"+(e=Math.floor(e)>>0)%60).slice(-2),(t=Math.floor(e/60)+":"+t).length<5&&(t="0"+t),t}}},"./lib/events.js":function(e,t){function i(){this.listeners={}}i.prototype.on=function(e,t,i){void 0!==this.listeners[e]?this.listeners[e].push({scope:i,callback:t}):this.listeners[e]=[{scope:i,callback:t}]},i.prototype.off=function(e,t,i){if(void 0!==this.listeners[e]){for(var n=this.listeners[e].length,o=[],s=0;s<n;s++){(t=this.listeners[e][s]).scope===i&&t.callback===t||o.push(t)}this.listeners[e]=t}},i.prototype.dispatch=function(e,t){if(void 0!==this.listeners[e])for(var i=0,n=this.listeners[e].length;i<n;i++){var o=this.listeners[e][i];o&&o.callback&&o.callback.apply(o.scope,[e,t])}},e.exports=i},"./lib/h5player.js":function(e,t,i){var n=i("./lib/events.js"),o=i("./lib/player.js"),s=i("./lib/dom.js"),r=Object.prototype.toString;function a(){this.options={el:"#bofqi",image:null,video_url:null,high_quality:!1,retry_times:5,max_duration:null},this.eventBus=new n}a.prototype.constructor=a,a.prototype.on=function(e,t){this.eventBus.on(e,t,this)},a.prototype.off=function(e,t){this.eventBus.off(e,t,this)},a.prototype.create=function(e){if("[object Object]"===r.call(e)&&(this.options=Object.assign({},this.options,e)),!this.options.el)return this.player={},!1;var t='<div class="player-container"><div class="dummy"></div><div class="player-box"><video'+("string"==typeof this.options.preload?" preload":"")+' width="100%" height="100%" '+(e.autoplay?"autoplay ":"")+'webkit-playsinline playsinline></video><div class="display"><div class="control-bar hide"><span class="control-btn btn-play"><i class="player-icon icon-play"></i></span><span class="control-btn btn-pause hide"><i class="player-icon icon-pause"></i></span><div class="time-container"><span class="control-text time-current-text">00:00</span> <span class="control-time-split"></span> <span class="control-text time-total-text">24:00</span></div><div class="right"><span class="control-btn btn-mute"><i class="player-icon icon-mute"></i></span><span class="control-btn btn-unmute hide"><i class="player-icon icon-unmute"></i></span><span class="control-volume-slider"></span><span class="control-btn btn-repeat"><i class="player-icon icon-repeat"></i></span><span class="control-btn btn-widescreen"><i class="player-icon icon-widescreen"></i></span><span class="control-btn btn-fullscreen active"><i class="player-icon icon-fullscreen"></i></span></div><div class="control-slider"></div></div><div class="load-layer"><img/><i class="player-icon icon-preview"></i></div><div class="state-icon"><i class="buff-icon"></i><i class="pause-icon"></i><i class="play-icon"></i></div></div></div></div>',i=document.createDocumentFragment(),n=document.createElement("div");n.innerHTML=t,i.appendChild(n);var o=this.options.el;return r.call(this.options.el).match(/HTML.+Element/)||(o=document.querySelector(this.options.el)),o||((o=document.createElement("div")).setAttribute("id",this.options.el.substring(1)),s.appendTo(o,document.body)),s.appendTo(i.firstChild.childNodes,o),this.setVideo(),this},a.prototype.setVideo=function(){var e=this.options,t=e.el;r.call(t).match(/HTML.+Element/)||(t=document.querySelector(e.el)),this.player=new o(t,{img:e.image,video_url:e.video_url,video_type:"video/mp4",on_state_change:e.on_state_change,max_duration:e.max_duration,autoplay:e.autoplay,eventBus:this.eventBus}),(this.options.auto_start||this.options.autoplay)&&this.player.start_video()},e.exports=a},"./lib/index.js":function(e,t,i){e.exports=i("./lib/h5player.js")},"./lib/player.js":function(i,n,o){var s=o("./lib/dom.js"),r=o("./lib/sliderCtrl.js"),a={};function l(e,t){this.elem=e,this.options=Object.assign({},a,t),this.screen_state=l.UI_NORMAL,this.video_state=l.V_IDEL,this.control_bar_visible=!0,this.control_bar_timer=null,this.control_bar_timer_delay=3e3,this.timer=null,this.stage=null,this.sliderCtrl=null,this.volumeCtrl=null,this.volume=1,this.currentTime=0,this.duration=0,this.init_ui(this.options),this.hidePlayIcon=!1}l.UI_NORMAL=0,l.UI_WIDE=1,l.UI_FULL=2,l.V_IDEL=0,l.V_READY=1,l.V_BUFF=2,l.V_PLAY=3,l.V_PAUSE=4,l.V_COMPLETE=5,l.V_CANPLAY=6,l.V_PLAYING=7,l.E_VIDEO_READY="ready",l.E_VIDEO_PLAY="video_media_play",l.E_VIDEO_PAUSE="video_media_pause",l.E_VIDEO_LOADSTART="video_media_loadstart",l.E_VIDEO_CANPLAY="video_media_canplay",l.E_VIDEO_WAITING="video_media_waiting",l.E_VIDEO_ENDED="video_media_ended",l.E_VIDEO_ERROR="video_media_error",l.E_VIDEO_LOADED="video_media_loaded",l.E_VIDEO_SEEK="video_media_seek",l.E_VIDEO_TIME="video_media_time",l.isFullscreen=function(){return null!=(document.webkitFullscreenElement||document.fullScreenElement||document.mozFullScreenElement||document.msFullscreenElement)},l.requestFullscreen=function(e){(e.webkitRequestFullScreen||e.requestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen||function(){}).apply(e)},l.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.prototype.constructor=l,l.prototype.play=function(){this.play_video()},l.prototype.seek=function(e){this.seek_video(e)},l.prototype.pause=function(){this.pause_video()},l.prototype.getDuration=function(){return this.video_duration()},l.prototype.isFullscreen=function(){return l.isFullscreen()},l.prototype.init_ui=function(t){var i=this;function n(){i.on_fullscreen_change()}t=t||{},this.elem.querySelector(".btn-widescreen").onclick=function(){i.screen_state!=l.UI_WIDE?i.to_wide_screen():i.to_normal_screen()},this.elem.querySelector(".btn-fullscreen").onclick=function(){i.screen_state!==l.UI_FULL?i.to_full_screen():i.to_normal_screen()},document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1),document.addEventListener("fullscreenchange",n,!1),this.elem.querySelector(".display").onmousemove=function(e){i.on_display_mousemove(e)},this.elem.querySelector(".display").onclick=function(e){i.on_display_click(e)},this.elem.querySelector(".control-bar").onclick=function(e){i.get_video_state()===l.V_PLAY&&i.set_control_bar_visible(!1,i.control_bar_timer_delay)},this.elem.querySelector(".btn-play").onclick=function(e){o.hasClass("hide")?i.on_play_btn_click(e):o.click()},this.elem.querySelector(".btn-pause").onclick=function(e){i.on_pause_btn_click(e)},this.elem.querySelector(".btn-repeat").onclick=function(e){i.on_repeat_btn_click(e)},this.elem.querySelector(".btn-mute").onclick=function(e){i.on_mute_btn_click(e)},this.elem.querySelector(".btn-unmute").onclick=function(e){i.on_unmute_btn_click(e)},this.sliderCtrl=new r({parent:this.elem.querySelector(".control-slider"),upLayer:this.elem.querySelector(".display"),onChange:function(e){i.on_slider_seek(e)}}),this.volumeCtrl=new r({parent:this.elem.querySelector(".control-volume-slider"),upLayer:this.elem.querySelector(".control-volume-slider"),liveDragging:!0,onChange:function(t){e.on_volume_slider_seek(t)},value:100*this.volume});var o=this.elem.querySelector(".load-layer");if(t.video_url?(t.img&&o.querySelector("img").setAttribute("src",t.img),o.onclick=function(){i.start_video()}):o.classList.add("hide"),t.preload){var a=this.elem.querySelector("video"),c=document.createElement("source");s.appendTo(c,a),c.setAttribute("src",t.video_url),c.setAttribute("type",t.video_type),this.video=a,a.addEventListener("play",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_PLAY),i.on_video_play(a)}),{passive:!0}),a.addEventListener("playing",(function(){i.on_video_playing(a)}),{passive:!0}),a.addEventListener("pause",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_PAUSE),i.on_video_pause(a)}),{passive:!0}),a.addEventListener("waiting",(function(){i.options.eventBus&&self.options.eventBus.dispatch(l.E_VIDEO_WAITING),i.on_video_waiting(a)}),{passive:!0}),a.addEventListener("loadstart",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_LOADSTART),i.on_video_loadstart(a)}),{passive:!0}),a.addEventListener("canplay",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_CANPLAY),i.on_video_canplay(a)}),{passive:!0}),a.addEventListener("ended",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_ENDED),i.on_video_ended(a)}),{passive:!0}),a.addEventListener("loadeddata",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_LOADED)}),{passive:!0}),a.addEventListener("error",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_ERROR)}),{passive:!0}),a.addEventListener("timeupdate",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_TIME)}),{passive:!0}),a.addEventListener("seeking",(function(){i.options.eventBus&&i.options.eventBus.dispatch(l.E_VIDEO_SEEK)}),{passive:!0})}/iPad/.test(window.navigator.userAgent)?(this.elem.querySelector(".btn-mute").classList.add("hide"),this.elem.querySelector(".control-volume-slider").classList.add("hide"),this.elem.querySelector(".btn-fullscreen").classList.add("hide"),this.elem.querySelector(".control-bar").classList.add("hide")):(this.elem.querySelector(".btn-mute").classList.add("hide"),this.elem.querySelector(".control-volume-slider").classList.add("hide"),this.elem.querySelector(".btn-fullscreen").classList.add("hide"),this.elem.querySelector(".btn-repeat").classList.add("hide"))},l.prototype.init_video=function(e,t,i){e=e||"",t=t||"video/mp4";var n=this,o=this.elem.querySelector("video");if(this.video=o,!i){this.play_video();var r=document.createElement("source");s.appendTo(r,o),r.setAttribute("src",e),r.setAttribute("type",t),o.addEventListener("play",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_PLAY),n.on_video_play(o)}),{passive:!0}),o.addEventListener("playing",(function(){n.on_video_playing(o)}),{passive:!0}),o.addEventListener("pause",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_PAUSE),n.on_video_pause(o)}),{passive:!0}),o.addEventListener("waiting",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_WAITING),n.on_video_waiting(o)}),{passive:!0}),o.addEventListener("loadstart",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_LOADSTART),n.on_video_loadstart(o)}),{passive:!0}),o.addEventListener("canplay",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_CANPLAY),n.on_video_canplay(o)}),{passive:!0}),o.addEventListener("ended",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_ENDED),n.on_video_canplay(o)}),{passive:!0}),o.addEventListener("loadeddata",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_LOADED)}),{passive:!0}),o.addEventListener("error",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_ERROR)}),{passive:!0}),o.addEventListener("timeupdate",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_TIME)}),{passive:!0}),o.addEventListener("seeking",(function(){n.options.eventBus&&n.options.eventBus.dispatch(l.E_VIDEO_SEEK)}),{passive:!0})}this.timer=setInterval((function(){n.on_timer_interval()}),100),this.set_video_state(l.V_READY)},l.prototype.on_video_play=function(){this.set_video_state(l.V_PLAY)},l.prototype.on_video_playing=function(){this.set_video_state(l.V_PLAYING)},l.prototype.on_video_pause=function(){this.set_video_state(l.V_PAUSE)},l.prototype.on_video_waiting=function(){this.set_video_state(l.V_BUFF)},l.prototype.on_video_loadstart=function(){this.set_video_state(l.V_BUFF)},l.prototype.on_video_canplay=function(){this.set_video_state(l.V_CANPLAY)},l.prototype.on_video_ended=function(){this.set_video_state(l.V_COMPLETE)},l.prototype.set_video_state=function(e){var t=this.video_state;if(t!==e&&this.elem.querySelector(".state-icon i")){switch(this.elem.querySelector(".state-icon i").classList.remove("active"),e){case l.V_READY:this.options.eventBus&&this.options.eventBus.dispatch(l.E_VIDEO_READY,{paly:this.play.bind(this),pause:this.pause.bind(this),seek:this.seek.bind(this),getDuration:this.getDuration.bind(this),isFullscreen:this.isFullscreen});break;case l.V_PLAY:this.elem.querySelector(".btn-play").classList.add("hide"),this.elem.querySelector(".btn-pause").classList.remove("hide"),this.elem.querySelector(".player-box").classList.add("full"),this.elem.querySelector(".state-icon i.play-icon").classList.add("active"),this.elem.querySelector(".state-icon i.pause-icon").classList.remove("active"),this.firstBuff?(this.firstBuff=!1,this.set_control_bar_visible(!1)):this.set_control_bar_visible(!1,this.control_bar_timer_delay);break;case l.V_PAUSE:this.elem.querySelector(".btn-pause").classList.add("hide"),this.elem.querySelector(".btn-play").classList.remove("hide"),this.elem.querySelector(".state-icon i.pause-icon").classList.add("active"),this.elem.querySelector(".state-icon i.play-icon").classList.remove("active");break;case l.V_BUFF:void 0===this.firstBuff&&(this.firstBuff=!0),this.hidePlayIcon=!0,this.elem.querySelector(".state-icon").classList.remove("hide"),this.elem.querySelector(".state-icon i.buff-icon").classList.add("active");break;case l.V_COMPLETE:this.elem.querySelector(".state-icon i.pause-icon").classList.add("active");break;case l.V_CANPLAY:s.hasClass(".load-layer","hide")&&this.elem.querySelector(".load-layer").click(),this.elem.querySelector(".btn-play").classList.add("hide"),this.elem.querySelector(".btn-pause").classList.remove("hide"),this.elem.querySelector(".player-box").classList.add("full"),this.elem.querySelector(".state-icon i.play-icon").classList.remove("active"),this.elem.querySelector(".state-icon i.pause-icon").classList.add("active"),this.firstBuff?(this.firstBuff=!1,this.set_control_bar_visible(!1)):this.set_control_bar_visible(!1,this.control_bar_timer_delay);break;case l.V_PLAYING:this.set_control_bar_visible(!1),this.elem.querySelector(".state-icon i.play-icon").classList.add("active"),this.elem.querySelector(".state-icon i.pause-icon").classList.remove("active")}e!==l.V_PLAY&&(this.elem.querySelector(".player-box").classList.remove("full"),this.set_control_bar_visible(!0)),this.video_state=e,this.on_state_change(this.video_state,t)}},l.prototype.on_state_change=function(e,t){this.options.on_state_change&&this.options.on_state_change(e,t)},l.prototype.get_video_state=function(){return this.video_state},l.prototype.start_video=function(){var e=this.options,t=this;this.elem.querySelector(".load-layer").classList.add("hide"),this.init_video(e.video_url,e.video_type,e.preload),e.autoplay||this.play_video(),this.elem.querySelector("video").style.display="inline",this.set_control_bar_visible(!1),s.addEvent(this.elem.querySelector(".state-icon i.play-icon"),"click",(function(){s.hasClass(this,"active")&&t.pause_video()})),s.addEvent(this.elem.querySelector(".state-icon i.pause-icon"),"click",(function(){t.play_video()}))},l.prototype.pause_video=function(){var e=this.video;e&&e.pause()},l.prototype.play_video=function(){var e=this.video,t=window.navigator.userAgent,i=document.querySelectorAll("video");if(e){if(t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||t.indexOf("iPad")>-1)for(var n=0;n<i.length;n++)i[n].pause();e.play()}},l.prototype.set_duration=function(e){this.duration=e},l.prototype.seek_video=function(e){this.video&&(e=Math.max(0,e),this.options.max_duration||(e=Math.min(e,this.video_duration()-.5)),this.video.pause(),this.video.currentTime=e,this.video.play())},l.prototype.set_volume=function(e){this.volume=e,this.video&&(this.video.volume=e)},l.prototype.video_time=function(){return this.currentTime},l.prototype.video_duration=function(){return this.duration},l.prototype.on_timer_interval=function(){this.update_time(this.video.currentTime,this.video.duration)},l.prototype.on_slider_seek=function(e){this.seek_video(e)},l.prototype.on_volume_slider_seek=function(e){this.set_volume(e/100)},l.prototype.update_time=function(e,t){if(t!=this.duration){this.maxDuration=this.options.max_duration>0?Math.min(this.options.max_duration,t):t;var i=this.duration;this.duration=t,this.sliderCtrl.setMax(this.maxDuration),Math.floor(i)!==Math.floor(this.maxDuration)&&this.elem.querySelector(".time-total-text")&&(this.elem.querySelector(".time-total-text").innerText=s.formatTime(this.maxDuration))}if(this.currentLessThanMaxDurationStatus&&e>this.maxDuration?(this.currentLessThanMaxDurationStatus=!1,this.seek_video(this.duration-.1)):e<this.maxDuration&&!this.currentLessThanMaxDurationStatus&&this.options.max_duration>0&&(this.currentLessThanMaxDurationStatus=!0),e!==this.currentTime){var n=this.currentTime;this.currentTime=e,this.sliderCtrl.setValue(e,!1),Math.floor(n)!==Math.floor(e)&&(this.elem.querySelector(".time-current-text").innerText=s.formatTime(e>this.maxDuration?this.maxDuration:e))}},l.prototype.to_wide_screen=function(){switch(this.screen_state){case l.UI_NORMAL:this.elem.querySelector(".player-box").classList.add("wide");break;case l.UI_FULL:this.elem.querySelector(".player-box").classList.remove("full"),this.set_control_bar_visible(!0),player.exitFullscreen()}try{window.player_fullwin(!0)}catch(e){}this.elem.querySelector(".btn-widescreen").classList.add("active"),this.screen_state=l.UI_WIDE},l.prototype.to_normal_screen=function(){switch(this.screen_state){case l.UI_FULL:l.exitFullscreen(),this.elem.querySelector(".player-box").classList.remove("full"),this.set_control_bar_visible(!0);case l.UI_WIDE:this.elem.querySelector(".player-box").classList.remove("wide")}try{window.player_fullwin(!1)}catch(e){}this.elem.querySelector(".btn-widescreen").classList.remove("active"),this.screen_state=l.UI_NORMAL},l.prototype.to_full_screen=function(){switch(this.screen_state){case l.UI_NORMAL:this.elem.querySelector(".player-box").classList.add("wide");break;case l.UI_WIDE:this.elem.querySelector(".player-box").classList.add("full"),l.requestFullscreen(this.elem)}try{window.player_fullwin(!0)}catch(e){}this.elem.querySelector(".btn-widescreen").classList.remove("active"),this.screen_state=l.UI_FULL},l.prototype.on_fullscreen_change=function(){l.isFullscreen()||this.to_normal_screen()},l.prototype.on_display_mousemove=function(e){this.screen_state===l.UI_FULL&&(e.pageY>=2*this.elem.clientHeight/3?this.control_bar_visible||this.set_control_bar_visible(!0):this.control_bar_visible&&this.set_control_bar_visible(!1))},l.prototype.on_display_click=function(e){e.target===this.elem.querySelector(".display")&&this.set_control_bar_visible(!this.control_bar_visible),this.get_video_state()===l.V_PLAY&&this.set_control_bar_visible(!1,this.control_bar_timer_delay)},l.prototype.on_play_btn_click=function(){this.play_video()},l.prototype.on_keydown=function(e){switch(e.which){case 32:this.video_state!=l.V_PLAY?this.play_video():this.pause_video();break;case 37:this.seek_video(this.video_time()-5);break;case 38:break;case 39:this.seek_video(this.video_time()+5)}},l.prototype.on_pause_btn_click=function(){this.pause_video()},l.prototype.on_share_btn_click=function(){"function"==typeof window.on_share_btn_click&&window.on_share_btn_click.call(this,t)},l.prototype.on_repeat_btn_click=function(){this.video&&(this.video.loop?(this.video.loop=!1,this.elem.querySelector(".btn-repeat").classList.remove("active")):this.elem.querySelector(".btn-repeat").classList.add("active"))},l.prototype.on_mute_btn_click=function(){this.elem.querySelector(".btn-mute").classList.add("hide"),this.elem.querySelector(".btn-unmute").classList.remove("hide"),this.elem.querySelector(".control-volume-slider").classList.add("mute"),this.video&&(this.video.muted=!0)},l.prototype.on_unmute_btn_click=function(){this.elem.querySelector(".btn-unmute").classList.add("hide"),this.elem.querySelector(".btn-mute").classList.remove("hide"),this.elem.querySelector(".control-volume-slider").classList.remove("mute"),this.video&&(this.video.muted=!1)},l.prototype.set_control_bar_visible=function(e,t){var i=this;clearTimeout(this.control_bar_timer),e!=this.control_bar_visible&&(e?(this.elem.querySelector(".control-bar").classList.remove("hide"),this.elem.querySelector(".state-icon").classList.remove("hide"),this.control_bar_visible=!0):(this.hidePlayIcon?this.hidePlayIcon=!1:this.elem.querySelector(".state-icon").classList.remove("hide"),this.control_bar_visible=setTimeout((function(){i.elem.querySelector(".control-bar").classList.add("hide"),i.elem.querySelector(".state-icon").classList.add("hide"),i.control_bar_visible=!1}),t||0)))},i.exports=l},"./lib/sliderCtrl.js":function(e,t,i){var n=i("./lib/dom.js"),o=function(){var e=window.navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)};function s(e){if(!e)throw"Slider: 缺少初始化参数";this.options=e,this.min=e.min||0,this.max=e.max||100,this.value=-1,this.label=e.label||"",this.upLayer=e.upLayer,this.parent=e.parent,this.uiValue=0,this.liveDragging=void 0!==e.liveDragging&&e.liveDragging,this.container=document.createElement("div"),this.container.className="ui-slider-container",this.labelLayer=document.createElement("div"),this.labelLayer.className="ui-slider-label",this.thumb=document.createElement("div"),this.thumb.className="ui-slider-thumb",this.tracker=document.createElement("div"),this.tracker.className="ui-slider-tracker",this.eventLayer=document.createElement("div"),this.eventLayer.className="ui-slider-event-layer",this.upLayer=this.upLayer||this.eventLayer,this.container.appendChild(this.tracker),this.container.appendChild(this.labelLayer),this.container.appendChild(this.thumb),this.container.appendChild(this.eventLayer);var t=this;n.addEvent(this.eventLayer,"mousedown",(function(e){t.onmousedown(),t.onmousemove(e.pageX,e.pageY)})),n.addEvent(this.eventLayer,"touchstart",(function(e){t.onmousedown(),t.ontouchmove(e.touches[0].pageX,e.touches[0].pageY)})),o()||n.addEvent(this.upLayer,"mouseup",(function(){t._down&&t.onmouseup()})),this.upLayer.onmouseleave=function(e){t._down&&t.onmouseup()},o()&&n.addEvent(this.upLayer,"touchend",(function(){t._down&&t.onmouseup()})),this.upLayer.onmousemove=function(e){t._down&&t.onmousemove(e.pageX,e.pageY)},n.addEvent(this.eventLayer,"touchmove",(function(e){t.ontouchmove(e.touches[0].pageY,e.touches[0].pageY)})),this.options.parent.appendChild(this.container),this.setLabel(this.label),this.setValue(this.options.value)}s.prototype.constructor=s,s.prototype.onclick=function(){},s.prototype.onmousedown=function(){this._down=!0},s.prototype.onmouseup=function(){this._down&&(this._down=!1,this.options.onChange&&(this.options.onChange(this.uiValue),this.setValue(this.uiValue)))},s.prototype.onmousemove=function(e){if(this._down){e-=n.offset(this.container).left;var t=this.positionToValue(e),i=this.uiValue;this.uiValue=t,this.setValue(t,!1),this._updatePosition(!0),this.liveDragging&&this.options.onChange&&this.uiValue!=i&&this.options.onChange(this.uiValue)}},s.prototype.ontouchmove=function(e){if(this._down){e-=n.offset(this.container).left;var t=this.positionToValue(e);this.uiValue=t,this.setValue(t,!1),this._updatePosition(!0)}},s.prototype.valueToPosition=function(e){return(e-this.min)/(this.max-this.min)},s.prototype.positionToValue=function(e){var t=this.eventLayer.offsetWidth;return e=Math.max(0,e),e=Math.min(t,e),this.min+(this.max-this.min)*e/t},s.prototype.getValue=function(){return this.min+this.getPercents()*(this.max-this.min)},s.prototype.getPercents=function(){return(this.value-this.min)/(this.max-this.min)},s.prototype.setValue=function(e){e=Math.min(this.max,Math.max(this.min,e)),this.value!=e&&(this.value=e,this._dispatchChange(e))},s.prototype.setMax=function(e){this.max=e,this._updatePosition()},s.prototype._dispatchChange=function(){this._updatePosition(),this.options.labelFunc?this.setLabel(this.label+": "+this.options.labelFunc(this.value)):this.setLabel(this.label+": "+this.value)},s.prototype._updatePosition=function(e){this._down&&!e||(this.thumb.style.width=100*this.getPercents()+"%")},s.prototype.setLabel=function(e){this.labelLayer.innerHTML=e};var r=document.createElement("style");r.type="text/css",r.innerHTML='.ui-slider-container {position: absolute;width: 100%;height: 30px;text-align: center;}.ui-slider-thumb {position: absolute;top: 0px;bottom: 0px;left: 0px;}.ui-slider-thumb:after {content: "";position: absolute;display: block;top: 0px;right: -30px;width: 30px;height: 30px;border-radius: 28px;box-shadow: 0 0 2pt rgba(0, 0, 0, 0.5);background-color: #fff;}.ui-slider-tracker {position: absolute;top: 0px;bottom: 0px;left: 0px;right: -30px;background: #888;}.ui-slider-event-layer {position: absolute;top: 0px;left: 0px;bottom: 0px;right: -30px;}.ui-slider-label {position: absolute;display: block;top: 0px;bottom: 0px;left: 0px;right: 0px;line-height: 30px;font-size: 10px;color: #fff;}',document.head.appendChild(r),e.exports=s},0:function(e,t,i){e.exports=i("./lib/index.js")}});